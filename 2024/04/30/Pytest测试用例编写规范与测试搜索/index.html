<!DOCTYPE html>
<html>
    <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <meta name="robots" content="index, follow">
  <!-- title -->
  
    
  <title>Pytest测试用例编写规范与测试搜索 - 无涯博客</title>
    
  
  
  <!-- open graph -->
  <meta name="description" content="The pytest framework makes it easy to write small, readable tests, and can scale to support complex functional testing for applications and libraries. 这段话很好地阐述了Pytest的设计思想与强大的特性。迄今为止，不管是市场的招聘需求还是在企业级里">
<meta property="og:type" content="article">
<meta property="og:title" content="Pytest测试用例编写规范与测试搜索">
<meta property="og:url" content="http://example.com/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/index.html">
<meta property="og:site_name" content="无涯博客">
<meta property="og:description" content="The pytest framework makes it easy to write small, readable tests, and can scale to support complex functional testing for applications and libraries. 这段话很好地阐述了Pytest的设计思想与强大的特性。迄今为止，不管是市场的招聘需求还是在企业级里">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B.jpg">
<meta property="og:image" content="http://example.com/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg">
<meta property="og:image" content="http://example.com/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg">
<meta property="article:published_time" content="2024-04-30T09:44:06.000Z">
<meta property="article:modified_time" content="2024-05-06T06:52:34.749Z">
<meta property="article:author" content="无涯">
<meta property="article:tag" content="Pytest测试框架">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B.jpg">
  <!-- canonical -->
  
  <link rel="canonical" href="http://example.com/2024/04/30/Pytest测试用例编写规范与测试搜索/">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <!-- CSS -->
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/markdown.css">

  
<link rel="stylesheet" href="/css/fonts.css">

<meta name="generator" content="Hexo 7.2.0"></head>

    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">无涯博客</a>
    <!-- <div class="logo"><a href="/" title="Len"><img src="/img/logo.svg" alt="Len" aria-label="logo" height="20"></a></div> -->
        <ul class="nav">
            
            <li><a href="/">Home</a></li>
            
            <li><a href="/about">About</a></li>
            
            <li><a href="/archives">Archives</a></li>
            
        </ul>


    </a>
</div>

                
                <div class="post-main">
    
        <div class="post-main-title">
            Pytest测试用例编写规范与测试搜索
        </div>
        <div class="post-meta">
            2024-04-30 ｜ 
            
        </div>
        <!-- 圆角分类 -->
        <!-- <div class="tags"> -->
            <!--  -->
        <!-- </div> -->
        <div class="post-md">
            <p>The <code>pytest</code> framework makes it easy to write small, readable tests, and can scale to support complex functional testing for applications and libraries. 这段话很好地阐述了Pytest的设计思想与强大的特性。迄今为止，不管是市场的招聘需求还是在企业级里面进行自动化测试都需要掌握Python语言体系中的Pytest测试框架。Pytest以轻量级的设计可以在编写TestCase方面具备天然的优势，又能够满足不同测试场景下的应用，本文章主要详细的阐述Pytest测试框架中测试用例编写规则与测试用例搜索规则。</p>
<h2 id="TestCase编写规范"><a href="#TestCase编写规范" class="headerlink" title="TestCase编写规范"></a>TestCase编写规范</h2><p>从研发质量角度而言，所谓测试就是通过测试的思维与技术的思维来保障被测产品的逻辑可用性、业务完整性、底层服务的稳定性、用户层面的易用性。因此测试需要设计出一定的TestCase来验证结果满足这个特性，TestCase的要素很多，必要的TestCase要素分别是前提条件、测试步骤、期望结果，在自动化测试领域设计（编写）的TestCase依然会满足这个要素，但是从TestCase独立性、完整性等特点出发，自动化的TestCase要素分别是前置条件、测试步骤、结果验证、清理。前置条件与清理部分我们称呼为“测试固件”，也就是针对一个测试场景需要验证时的初始化与清理的部分，自动化测试用例编写规范详细信息见<a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=MzAwMzY3MTU3Nw==&mid=2650529405&idx=1&sn=cddd2f89b75bc7c10c62bf2588e3f7fd&chksm=8338ed0bb44f641d52b1f3deb47a63a99e07e394a77a49b0412bffca10c1a284027dc1aab36e&scene=21#wechat_redirect">自动化测试用例规范</a>，根据这些规范与原则，可以总结出TestCase与测试对象之间的关系具体如下。</p>
<p><img src="/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B.jpg" alt="测试用例"></p>
<h2 id="Pytest优势"><a href="#Pytest优势" class="headerlink" title="Pytest优势"></a>Pytest优势</h2><p>在Python语言技术栈体系中，单元测试框架应用最广泛的是unittest与pytest。unittest也是非常优秀的单元测试框架，它有很完善的测试固件、测试验证、测试报告、测试执行等策略。在早期可以说不管是UI自动化测试还是API自动化测试，在以Python语言为技术栈的体系中，基本都是使用的unittest作为单元测试框架来进行各种不同类型的自动化测试用例编写与执行。技术的发展逐渐演变为Pytest，这个过程中直接产生的结果是后续进行的UI自动化测试与API自动化测试都逐渐地使用Pytest单元测试框架代替了unittest，这个过程可以总结为不是unittest不优秀，而是Pytest与unittest测试框架相比较，更加优化，使用灵活度更高，具体体现在如下几点。</p>
<ul>
<li>Pytest可以使用面向对象的编程模式也可以使用函数式的编程模式</li>
<li>Pytest在使用参数化的时候不需要借助第三方的库，直接使用内部的parametrize</li>
<li>在测试报告部分Pytest可以使用第三方的插件pytest-html，也可以使用Allure来生成测试报告</li>
<li>Pytest测试框架有很丰富的第三方库</li>
<li>Pytest支持失败重试(这个特性很强大)</li>
</ul>
<p>##Pytest搜索规则</p>
<p>测试搜索指的是在pytest的测试框架中，如果没有指定⽬录，它默认是会搜索⼀个项⽬下所有可执⾏的测试模块以 及测试模块⾥⾯的测试⽤例来进⾏的，并不在乎测试⽤例是在哪个package那个模块的，这样的⼀个过程成为“测试 搜索”，只要符合它的规则的它都是会被执⾏的。首先抛开编程模式，所有的测试模块建议都存放在test的模块下，创建的测试模块都是以test_开头，一言以蔽之，这样就能够很清晰看到TestCase是写在什么包下，当然在具体的测试模块中如果编写的TestCase不符合Pytest搜索的规则，那么也不会被执行，见如下的案例代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a,b</span>):  </span><br><span class="line">    <span class="keyword">return</span> a+b </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">str_add</span>():  </span><br><span class="line">    <span class="keyword">assert</span> add(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)==<span class="string">&#x27;ab&#x27;</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddTest</span>():  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">integer_add</span>(<span class="params">self</span>):    </span><br><span class="line">        <span class="keyword">assert</span> add(<span class="number">2</span>,<span class="number">3</span>)==<span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>如上的测试代码使用Pytest执行后，里面编写的不管是函数式的还是面向对象的都不会被执行，执行结果就会显示为：collected 0 items 。这是因为编写的测试用例不符合Pytest搜索的规则，规范的写法是如果是函数式的编程模式，编写的测试函数都必须是以test开头，建议test_的模式，如果是测试类，都必须是以Test开头并且里面的测试方法也都必须是以test开头，建议test_的模式，按照这个要求调整如上的代码，见调整后的代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a,b</span>):  </span><br><span class="line">    <span class="keyword">return</span> a+b </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_str_add</span>():  </span><br><span class="line">    <span class="keyword">assert</span> add(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)==<span class="string">&#x27;ab&#x27;</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestAdd</span>():  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_integer_add</span>(<span class="params">self</span>):    </span><br><span class="line">        <span class="keyword">assert</span> add(<span class="number">2</span>,<span class="number">3</span>)==<span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>调整后的代码再次进行执行，执行后的结果信息如下所示。</p>
<p><img src="/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="执行结果"></p>
<p>在实际的工作中，可以根据公司的具体规范来使用不同的编程模式来编写TestCase，但是需要特别强调的是不管是哪种规范，编写的测试函数或者是测试方法都需要遵守Pytest的搜索规则。</p>
<p>感谢您的阅读！服务端测试开发技术已经成为测试工程师、测试开发工程师成为高薪必备的测试开发技能，越早掌握，越能占得红利。本课程带您从零到一构建服务端测试开发知识体系，并引入了业界主流的测试开发技术栈体系(微服务架构,MQ消息队列,DevOps,性能测试,混沌工程等)，整合业内主流的测试开发技术，带您打通高薪测试开发工程师需要具备的软实力和测试开工技术的任督二脉。</p>
<p><a target="_blank" rel="noopener" href="https://study.163.com/course/introduction/1212497802.htm">https://study.163.com/course/introduction/1212497802.htm</a></p>
<p>《Python服务端测试开发》书籍已出版，书籍主要面向想系统、全栈学习服务端测试开发领域内的测试工程师，读者包含但不限于软件测试工程师、自动化测试工程师、测试开发工程师和测试管理者。通过本书您将会学习到服务端测试领域测试开发技术栈知识，包含了API测试框架设计思想与案例实战，Docker容器化技术，基于DevOps体系下的CI&#x2F;CD技术栈知识体系，CI&#x2F;CD技术在企业的技术落地案例，服务端测试开发领域的性能测试核心理论、方法论、流程化和主流性能测试在服务端的最佳实践、性能测试过程中全链路监控与分布式追踪监控技术解决方案，JVM性能分析与案例监控实践。同时您也会学习到微服务架构下质量体系建设，混沌工程实践，和针对底层高可用系统的保障技术思路。点击如下链接购买。</p>
<p><a target="_blank" rel="noopener" href="https://product.dangdang.com/29701404.html">https://product.dangdang.com/29701404.html</a></p>
<p>关注“Python自动化测试”公众号，阅读更多测试开发技术文章，与众多测试开发工程师一起进步。</p>
<p><img src="/2024/04/30/Pytest%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%90%9C%E7%B4%A2/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="微信公众号"></p>

        </div>
    
<!-- tags -->

    <div class="post-meta">
        标签：
        
            <a href="/tags/Pytest%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/"> / Pytest测试框架</a>
        
    </div>

</div>
                <div class="footer">
    <span>Copyright © 2024 无涯博客</span>
    <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> with <a target="_blank" rel="noopener" href="https:///imzl.com/zenmind">无涯</a></span>
</div>

<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>

<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    </body>
</html>